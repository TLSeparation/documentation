

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tlseparation.utility package &mdash; TLSeparation  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CHANGELOG" href="changelog.html" />
    <link rel="prev" title="tlseparation.scripts package" href="tlseparation.scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TLSeparation
          

          
          </a>

          
            
            
              <div class="version">
                1.3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tlseparation.html">tlseparation package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tlseparation.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tlseparation.classification.html">tlseparation.classification package</a></li>
<li class="toctree-l3"><a class="reference internal" href="tlseparation.scripts.html">tlseparation.scripts package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">tlseparation.utility package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.cloud_analysis">tlseparation.utility.cloud_analysis module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.clustering">tlseparation.utility.clustering module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.data_utils">tlseparation.utility.data_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.downsampling">tlseparation.utility.downsampling module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.filtering">tlseparation.utility.filtering module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.knnsearch">tlseparation.utility.knnsearch module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.peakdetect">tlseparation.utility.peakdetect module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.shortpath">tlseparation.utility.shortpath module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility.voxels">tlseparation.utility.voxels module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-tlseparation.utility">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tlseparation.html#module-tlseparation">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TLSeparation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="tlseparation.html">tlseparation package</a> &raquo;</li>
        
      <li>tlseparation.utility package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tlseparation.utility.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tlseparation-utility-package">
<h1>tlseparation.utility package<a class="headerlink" href="#tlseparation-utility-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tlseparation.utility.cloud_analysis">
<span id="tlseparation-utility-cloud-analysis-module"></span><h2>tlseparation.utility.cloud_analysis module<a class="headerlink" href="#module-tlseparation.utility.cloud_analysis" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.cloud_analysis.detect_nn_dist">
<code class="descclassname">tlseparation.utility.cloud_analysis.</code><code class="descname">detect_nn_dist</code><span class="sig-paren">(</span><em>arr</em>, <em>knn</em>, <em>sigma=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/cloud_analysis.html#detect_nn_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.cloud_analysis.detect_nn_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Calcuates the optimum distance among neighboring points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array (m x n) containing a set of parameters (n) over
a set of observations (m).</p>
</dd>
<dt><strong>knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of nearest neighbors to search to constitue the local subset
of points around each point in ‘arr’.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Optimal distance among neighboring points.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.cloud_analysis.detect_optimal_knn">
<code class="descclassname">tlseparation.utility.cloud_analysis.</code><code class="descname">detect_optimal_knn</code><span class="sig-paren">(</span><em>arr, rad_lst=[0.1, 0.2, 0.3], sample_size=10000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/cloud_analysis.html#detect_optimal_knn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.cloud_analysis.detect_optimal_knn" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects optimal values for knn in order to facilitate material separation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr: array</strong></dt>
<dd><p class="first last">Set of 3D points.</p>
</dd>
<dt><strong>rad_lst: list</strong></dt>
<dd><p class="first last">Set of radius values to generate samples of neighborhoods. This is
used to select points to calculate a number of neighboring points
distribution from the point cloud.</p>
</dd>
<dt><strong>sample_size: int</strong></dt>
<dd><p class="first last">Number of points in arr to process in order to genrate a distribution.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>knn_lst: list</strong></dt>
<dd><p class="first last">Set of k-nearest neighbors values.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.cloud_analysis.detect_rad_nn">
<code class="descclassname">tlseparation.utility.cloud_analysis.</code><code class="descname">detect_rad_nn</code><span class="sig-paren">(</span><em>arr</em>, <em>rad</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/cloud_analysis.html#detect_rad_nn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.cloud_analysis.detect_rad_nn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates an average of number of neighbors based on a fixed radius
around each point in a point cloud.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Radius distance to select neighboring points.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mean_knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Average number of points inside a radius ‘rad’ around each point in
‘arr’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.clustering">
<span id="tlseparation-utility-clustering-module"></span><h2>tlseparation.utility.clustering module<a class="headerlink" href="#module-tlseparation.utility.clustering" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.clustering.connected_component">
<code class="descclassname">tlseparation.utility.clustering.</code><code class="descname">connected_component</code><span class="sig-paren">(</span><em>arr</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/clustering.html#connected_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.clustering.connected_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a connected component analysis to cluster points from a point
cloud.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>voxel_size: float</strong></dt>
<dd><p class="first last">Distance used to generate voxels from point cloud in order to 
perform the connected component analysis in 3D space.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>point_labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">1D array with cluster labels assigned to each point from the input
point cloud.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.data_utils">
<span id="tlseparation-utility-data-utils-module"></span><h2>tlseparation.utility.data_utils module<a class="headerlink" href="#module-tlseparation.utility.data_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.data_utils.apply_nn_value">
<code class="descclassname">tlseparation.utility.data_utils.</code><code class="descname">apply_nn_value</code><span class="sig-paren">(</span><em>base</em>, <em>arr</em>, <em>attr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/data_utils.html#apply_nn_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.data_utils.apply_nn_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Upscales a set of attributes from a base array to another denser array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>base</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Base array to which the attributes to upscale were originaly matched.</p>
</dd>
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Target array to which the attributes will be upscaled.</p>
</dd>
<dt><strong>attr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Attributes to upscale.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>new_attr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Upscales attributes.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>AssertionError:</strong></dt>
<dd><p class="first last">length (number of samples) of “base” and “attr” must be equal.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.data_utils.entries_to_remove">
<code class="descclassname">tlseparation.utility.data_utils.</code><code class="descname">entries_to_remove</code><span class="sig-paren">(</span><em>entries</em>, <em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/data_utils.html#entries_to_remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.data_utils.entries_to_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to remove selected entries (key and respective values) from
a given dict.
Based on a reply from the user mattbornski <a class="footnote-reference" href="#id2" id="id1">[1]</a> at stackoverflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>entries</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Set of entried to be removed.</p>
</dd>
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary to apply the entried removal.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>mattbornski, 2012. <a class="reference external" href="http://stackoverflow.com/questions/8995611/removing-multiple-keys-from-a-dictionary-safely">http://stackoverflow.com/questions/8995611/removing-multiple-keys-from-a-dictionary-safely</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.data_utils.get_diff">
<code class="descclassname">tlseparation.utility.data_utils.</code><code class="descname">get_diff</code><span class="sig-paren">(</span><em>arr1</em>, <em>arr2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/data_utils.html#get_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.data_utils.get_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the intersection of two arrays, returning the entries not
intersected between arr1 and arr2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array of points to intersect.</p>
</dd>
<dt><strong>arr2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array of points to intersect.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Difference array between ‘arr1’ and ‘arr2’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.data_utils.remove_duplicates">
<code class="descclassname">tlseparation.utility.data_utils.</code><code class="descname">remove_duplicates</code><span class="sig-paren">(</span><em>arr</em>, <em>return_ids=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/data_utils.html#remove_duplicates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.data_utils.remove_duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes duplicated rows from an array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array (m x n) containing a set of parameters (n) over
a set of observations (m).</p>
</dd>
<dt><strong>return_ids: bool</strong></dt>
<dd><p class="first last">Option to return indices of duplicated entries instead of new array
with unique entries.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>unique</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array (m* x n) containing a set of unique parameters (n)
over a set of unique observations (m*).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.downsampling">
<span id="tlseparation-utility-downsampling-module"></span><h2>tlseparation.utility.downsampling module<a class="headerlink" href="#module-tlseparation.utility.downsampling" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.downsampling.downsample_cloud">
<code class="descclassname">tlseparation.utility.downsampling.</code><code class="descname">downsample_cloud</code><span class="sig-paren">(</span><em>point_cloud</em>, <em>downsample_size</em>, <em>return_indices=False</em>, <em>return_neighbors=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/downsampling.html#downsample_cloud"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.downsampling.downsample_cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsamples a point cloud by voxelizing it and selecting points closest
to the median coordinate of all points inside each voxel. The remaining
points can be stored and returned as a dictrionary for later
use in upsampling back to original input data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>point_cloud</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy.ndarray</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>downsample_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Size of the voxels used to sample points into groups and select the
most central point from. Note that this will not be the final points
distance from each other, but an approximation.</p>
</dd>
<dt><strong>return_indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Option to return results as downsampled array (False) or the
indices of downsampled points from original point cloud (True).</p>
</dd>
<dt><strong>return_neighbors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Option to return original neighbors of downsampled points (True) or
not (False). This information can be used to upsample back the
downsampled indices.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.downsampling.upsample_cloud">
<code class="descclassname">tlseparation.utility.downsampling.</code><code class="descname">upsample_cloud</code><span class="sig-paren">(</span><em>upsample_ids</em>, <em>neighbors_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/downsampling.html#upsample_cloud"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.downsampling.upsample_cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Upsample cloud based on downsampling information from ‘downsample_cloud’.
This function will loop over each ‘upsample_ids’ and retrieve its
original neighboring points stored in ‘neighbors_dict’.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>upsample_ids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of indices in ‘neighbors_dict’ to upsample.</p>
</dd>
<dt><strong>neighbors_dict</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Neighbors information provided by ‘downsample_cloud’ containing
all the original neighboring points to each point in the downsampled
cloud.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>upsampled_indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy.ndarray</span></dt>
<dd><p class="first last">Upsampled points from original point cloud.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.filtering">
<span id="tlseparation-utility-filtering-module"></span><h2>tlseparation.utility.filtering module<a class="headerlink" href="#module-tlseparation.utility.filtering" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.filtering.array_majority">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">array_majority</code><span class="sig-paren">(</span><em>arr_1</em>, <em>arr_2</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#array_majority"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.array_majority" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies majority filter on two arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>arr_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>**knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Number neighbors to select around each point in arr in order to apply
the majority criteria.</p>
</dd>
<dt><strong>**rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Search radius arount each point in arr to select neighbors in order
to apply the majority criteria.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>c_maj_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_1’.</p>
</dd>
<dt><strong>c_maj_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_2’.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>AssertionError:</strong></dt>
<dd><p class="first last">Raised if neither ‘knn’ or ‘rad’ arguments are passed with valid
values (int or float).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.class_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">class_filter</code><span class="sig-paren">(</span><em>arr_1</em>, <em>arr_2</em>, <em>target</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#class_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.class_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to apply class filter on an array based on the combination of
classed from both arrays (arr_1 and arr_2). Which array gets filtered
is defined by ‘’target’‘.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>arr_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>target</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Number of the input array to filter. Valid values are 0 or 1.</p>
</dd>
<dt><strong>**knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Number neighbors to select around each point in arr in order to apply
the majority criteria.</p>
</dd>
<dt><strong>**rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Search radius arount each point in arr to select neighbors in order
to apply the majority criteria.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>c_maj_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_1’.</p>
</dd>
<dt><strong>c_maj_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_2’.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>AssertionError:</strong></dt>
<dd><p class="first last">Raised if neither ‘knn’ or ‘rad’ arguments are passed with valid
values (int or float).</p>
</dd>
<dt><strong>AssertionError:</strong></dt>
<dd><p class="first last">Raised if ‘target’ variable is not an int or float with value 0 or 1.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.cluster_features">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">cluster_features</code><span class="sig-paren">(</span><em>arr</em>, <em>labels</em>, <em>feature_threshold</em>, <em>min_pts=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#cluster_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.cluster_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a set of connected components by a geometric feature threshold.
This feature (n 2 in the separation methodology) is used to describe
elongated shapes. If the shape of the cluster is elongated enough
(i.e. feature value larger than threshold) the points belonging to this
cluster are masked as True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">1D array with cluster labels assigned to each point from the input
point cloud.</p>
</dd>
<dt><strong>feature_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum feature value for the cluster to be set as elongated (True).</p>
</dd>
<dt><strong>min_pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Minimum number of points for the cluster to be set as valid (True).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>filter_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">1D mask array setting True for valid poins in ‘arr’ and False
otherwise.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.cluster_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">cluster_filter</code><span class="sig-paren">(</span><em>arr</em>, <em>max_dist</em>, <em>eval_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#cluster_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.cluster_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a cluster filter to a point cloud ‘arr’. This filter aims to
remove small, isolated, clusters of points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Point cloud of shape n points x m dimensions to be filtered.</p>
</dd>
<dt><strong>max_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum distance between points to considered part of the same
cluster.</p>
</dd>
<dt><strong>eval_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum value for largest eigenvalue for a valid cluster. This value
is an indication of cluster shape, in which the higher the eigenvalue,
more elongated is the cluster. Points from clusters that have
eigenvalue smaller then eval_threshold are filtered out.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered points. Entries are set as True if belonging
to a valid cluster and False otherwise.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.cluster_size">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">cluster_size</code><span class="sig-paren">(</span><em>arr</em>, <em>labels</em>, <em>min_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#cluster_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.cluster_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a set of connected components by maximum size on any dimension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">1D array with cluster labels assigned to each point from the input
point cloud.</p>
</dd>
<dt><strong>min_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int/float</span></dt>
<dd><p class="first last">Minimum size, on any dimension, for a cluster to be set as
valid (True)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>filter_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">1D mask array setting True for valid poins in ‘arr’ and False
otherwise.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.continuity_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">continuity_filter</code><span class="sig-paren">(</span><em>wood</em>, <em>leaf</em>, <em>rad=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#continuity_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.continuity_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to apply a continuity filter to a point cloud that contains gaps
defined as points from a second point cloud.
This function works assuming that the continuous variable is the
wood portion of a tree point cloud and the gaps in it are empty space
or missclassified leaf data. In this sense, this function tries to correct
gaps where leaf points are present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>wood</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Wood point cloud to be filtered.</p>
</dd>
<dt><strong>leaf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Leaf point cloud, with points that may be causing discontinuities in
the wood point cloud.</p>
</dd>
<dt><strong>rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Radius to search for neighboring points in the iterative process.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>wood</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Filtered wood point cloud.</p>
</dd>
<dt><strong>not_wood</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Remaining point clouds after the filtering.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.dist_majority">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">dist_majority</code><span class="sig-paren">(</span><em>arr_1</em>, <em>arr_2</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#dist_majority"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.dist_majority" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies majority filter on two arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>arr_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points to filter.</p>
</dd>
<dt><strong>**knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Number neighbors to select around each point in arr in order to apply
the majority criteria.</p>
</dd>
<dt><strong>**rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or float</span></dt>
<dd><p class="first last">Search radius arount each point in arr to select neighbors in order to
apply the majority criteria.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>c_maj_1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_1’.</p>
</dd>
<dt><strong>c_maj_2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Boolean mask of filtered entries of same class as input ‘arr_2’.</p>
</dd>
<dt><strong>Raises:</strong></dt>
<dd></dd>
<dt><strong>AssertionError:</strong></dt>
<dd><p class="first last">Raised if neither ‘knn’ or ‘rad’ arguments are passed with valid
values (int or float).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.feature_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">feature_filter</code><span class="sig-paren">(</span><em>arr</em>, <em>feature_id</em>, <em>threshold</em>, <em>knn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#feature_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.feature_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a point cloud based on a given feature threshold. Only points
with selected feature values higher than threshold are kept as valid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>feature_id</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Column index of feature selected as criteria to filter. Column
indices follow Python notation [0 - (n_columns - 1)].</p>
</dd>
<dt><strong>threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum feature value for valid points.</p>
</dd>
<dt><strong>knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of neighbors to select around each point. Used to describe
local point arrangement.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask_feature</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy.ndarray</span></dt>
<dd><p class="first last">Boolean mask with valid points entries set as True.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.plane_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">plane_filter</code><span class="sig-paren">(</span><em>arr</em>, <em>rad</em>, <em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#plane_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.plane_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a point cloud based on its points planicity. Removes points that
are part of a neighbohood with planar spatial arrangement (low curvature).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Three-dimensional (m x n) array of a point cloud, where the
coordinates are represented in the columns (n) and the points are
represented in the rows (m).</p>
</dd>
<dt><strong>rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Search radius distance around each point. Used to describe
local point arrangement.</p>
</dd>
<dt><strong>threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum curvature value for valid points.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask_plane</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy.ndarray</span></dt>
<dd><p class="first last">Boolean mask with valid points entries set as True.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.filtering.radius_filter">
<code class="descclassname">tlseparation.utility.filtering.</code><code class="descname">radius_filter</code><span class="sig-paren">(</span><em>arr</em>, <em>radius</em>, <em>min_points</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/filtering.html#radius_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.filtering.radius_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a radius search filter, which remove isolated points/clusters of
points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Point cloud of shape n points x m dimensions to be filtered.</p>
</dd>
<dt><strong>radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Search radius around each point to form a neighborhood.</p>
</dd>
<dt><strong>min_point</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Minimum number of points in a neighborhood for it to be considered
valid, i.e not filtered out.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Array of bools masking valid points as True and “noise” points as
False.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.knnsearch">
<span id="tlseparation-utility-knnsearch-module"></span><h2>tlseparation.utility.knnsearch module<a class="headerlink" href="#module-tlseparation.utility.knnsearch" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.knnsearch.set_nbrs_knn">
<code class="descclassname">tlseparation.utility.knnsearch.</code><code class="descname">set_nbrs_knn</code><span class="sig-paren">(</span><em>arr</em>, <em>pts</em>, <em>knn</em>, <em>return_dist=True</em>, <em>block_size=100000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/knnsearch.html#set_nbrs_knn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.knnsearch.set_nbrs_knn" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create a set of nearest neighbors indices and their respective
distances for a set of points. This function uses a knn search and sets a
limit size for a block of points to query. This makes it less efficient in
terms of processing time, but avoids running out of memory in cases of
very dense/large arrays/queries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array to perform the knn search on.</p>
</dd>
<dt><strong>pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array to search for on the knn search.</p>
</dd>
<dt><strong>knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of nearest neighbors to search for.</p>
</dd>
<dt><strong>return_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Option to return or not the distances of each neighbor.</p>
</dd>
<dt><strong>block_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Limit of points to query. The variable ‘pts’ will be subdivided in n
blocks of size block_size to perform query.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Set of neighbors indices from ‘arr’ for each entry in ‘pts’.</p>
</dd>
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Distances from each neighbor to each central point in ‘pts’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.knnsearch.set_nbrs_rad">
<code class="descclassname">tlseparation.utility.knnsearch.</code><code class="descname">set_nbrs_rad</code><span class="sig-paren">(</span><em>arr</em>, <em>pts</em>, <em>rad</em>, <em>return_dist=True</em>, <em>block_size=100000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/knnsearch.html#set_nbrs_rad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.knnsearch.set_nbrs_rad" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create a set of nearest neighbors indices and their respective
distances for a set of points. This function uses a radius search and sets
a limit size for a block of points to query. This makes it less efficient
in terms of processing time, but avoids running out of memory in cases of
very dense/large arrays/queries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array to perform the radius search on.</p>
</dd>
<dt><strong>pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N-dimensional array to search for on the knn search.</p>
</dd>
<dt><strong>rad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Radius of the NearestNeighbors search.</p>
</dd>
<dt><strong>return_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Option to return or not the distances of each neighbor.</p>
</dd>
<dt><strong>block_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Limit of points to query. The variable ‘pts’ will be subdivided in n
blocks of size block_size to perform query.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Set of neighbors indices from ‘arr’ for each entry in ‘pts’.</p>
</dd>
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Distances from each neighbor to each central point in ‘pts’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.knnsearch.subset_nbrs">
<code class="descclassname">tlseparation.utility.knnsearch.</code><code class="descname">subset_nbrs</code><span class="sig-paren">(</span><em>distance</em>, <em>indices</em>, <em>new_knn</em>, <em>block_size=100000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/knnsearch.html#subset_nbrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.knnsearch.subset_nbrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a subseting of points from the results of a nearest neighbors
search.
This function assumes that the first index/distance in each row represents
the center point of the neighborhood represented by said rows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Distances from each neighbor to each central point in ‘pts’.</p>
</dd>
<dt><strong>indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Set of neighbors indices from ‘arr’ for each entry in ‘pts’.</p>
</dd>
<dt><strong>new_knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Number of neighbors to select from the initial number of neighbors.</p>
</dd>
<dt><strong>block_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Limit of points to query. The variables ‘distance’ and ‘indices’ will
be subdivided in n blocks of size block_size to perform query.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Subset of distances from each neighbor ‘indices’.</p>
</dd>
<dt><strong>indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Subset of neighbors indices from ‘indices’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.peakdetect">
<span id="tlseparation-utility-peakdetect-module"></span><h2>tlseparation.utility.peakdetect module<a class="headerlink" href="#module-tlseparation.utility.peakdetect" title="Permalink to this headline">¶</a></h2>
<p>% Eli Billauer, 3.4.05 (Explicitly not copyrighted).
% This function is released to the public domain; Any use is allowed.</p>
<p>Modifications in docstrings were performed by TLSepartion project
to improve autodocumentation using Sphinx. All credits are still to
Eli Billauer.</p>
<dl class="function">
<dt id="tlseparation.utility.peakdetect.peakdet">
<code class="descclassname">tlseparation.utility.peakdetect.</code><code class="descname">peakdet</code><span class="sig-paren">(</span><em>v</em>, <em>delta</em>, <em>x=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/peakdetect.html#peakdet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.peakdetect.peakdet" title="Permalink to this definition">¶</a></dt>
<dd><p>Converted from MATLAB script at <a class="reference external" href="http://billauer.co.il/peakdet.html">http://billauer.co.il/peakdet.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>v: array</strong></dt>
<dd><p class="first last">Input vector (1D array) of values.</p>
</dd>
<dt><strong>delta: float</strong></dt>
<dd><p class="first last">Value change that characterizes a peak. A point is considered a
maximum peak if it has the maximal value, and was preceded
(to the left) by a value lower by delta.</p>
</dd>
<dt><strong>x: array</strong></dt>
<dd><p class="first last">Set of x values to replace indices in maxtab/mintab.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>maxtab: array</strong></dt>
<dd><p class="first last">2D array containing maxima peaks indices and values.</p>
</dd>
<dt><strong>mintab: array</strong></dt>
<dd><p class="first last">2D array containing minima peaks indices and values.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Eli Billauer, 3.4.05 (Explicitly not copyrighted).
This function is released to the public domain; Any use is allowed.</p>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.shortpath">
<span id="tlseparation-utility-shortpath-module"></span><h2>tlseparation.utility.shortpath module<a class="headerlink" href="#module-tlseparation.utility.shortpath" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.shortpath.add_nodes">
<code class="descclassname">tlseparation.utility.shortpath.</code><code class="descname">add_nodes</code><span class="sig-paren">(</span><em>G</em>, <em>base_node</em>, <em>indices</em>, <em>distance</em>, <em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/shortpath.html#add_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.shortpath.add_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a set of nodes and weighted edges based on pairs of indices
between base_node and all entries in indices. Each node pair shares an
edge with weight equal to the distance between both nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>G</strong> <span class="classifier-delimiter">:</span> <span class="classifier">networkx graph</span></dt>
<dd><p class="first last">NetworkX graph object to which all nodes/edges will be added.</p>
</dd>
<dt><strong>base_node</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Base node’s id to be added. All other nodes will be paired with
base_node to form different edges.</p>
</dd>
<dt><strong>indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list or array</span></dt>
<dd><p class="first last">Set of nodes indices to be paired with base_node.</p>
</dd>
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list or array</span></dt>
<dd><p class="first last">Set of distances between all nodes in ‘indices’ and base_node.</p>
</dd>
<dt><strong>threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Edge distance threshold. All edges with distance larger than
‘threshold’ will not be added to G.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.shortpath.array_to_graph">
<code class="descclassname">tlseparation.utility.shortpath.</code><code class="descname">array_to_graph</code><span class="sig-paren">(</span><em>arr</em>, <em>base_id</em>, <em>kpairs</em>, <em>knn</em>, <em>nbrs_threshold</em>, <em>nbrs_threshold_step</em>, <em>graph_threshold=inf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/shortpath.html#array_to_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.shortpath.array_to_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a numpy.array of points coordinates into a Weighted BiDirectional
NetworkX Graph.
This funcions uses a NearestNeighbor search to determine points adajency.
The NNsearch results are used to select pairs of points (or nodes) that
have a common edge.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">n-dimensional array of points.</p>
</dd>
<dt><strong>base_id</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Index of base id (root) in the graph.</p>
</dd>
<dt><strong>kpairs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of points around each point in arr to select in order to
build edges.</p>
</dd>
<dt><strong>knn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of neighbors to search around each point in the neighborhood
phase. The higher the better (careful, it’s  memory intensive).</p>
</dd>
<dt><strong>nbrs_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum valid distance between neighbors points.</p>
</dd>
<dt><strong>nbrs_threshold_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Distance increment used in the final phase of edges generation. It’s
used to make sure that in the end, every point in arr will be
translated to nodes in the graph.</p>
</dd>
<dt><strong>graph_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum distance between pairs of nodes (edge distance) accepted in
the graph generation.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>G</strong> <span class="classifier-delimiter">:</span> <span class="classifier">networkx graph</span></dt>
<dd><p class="first last">Graph containing all points in ‘arr’ as nodes.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tlseparation.utility.shortpath.extract_path_info">
<code class="descclassname">tlseparation.utility.shortpath.</code><code class="descname">extract_path_info</code><span class="sig-paren">(</span><em>G</em>, <em>base_id</em>, <em>return_path=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/shortpath.html#extract_path_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.shortpath.extract_path_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts shortest path information from a NetworkX graph.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>G</strong> <span class="classifier-delimiter">:</span> <span class="classifier">networkx graph</span></dt>
<dd><p class="first last">NetworkX graph object from which to extract the information.</p>
</dd>
<dt><strong>base_id</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Base (root) node id to calculate the shortest path for all other
nodes.</p>
</dd>
<dt><strong>return_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Option to select if function should output path list for every node
in G to base_id.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>nodes_ids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Indices of all nodes in graph G.</p>
</dd>
<dt><strong>distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Shortest path distance (accumulated) from all nodes in G to base_id
node.</p>
</dd>
<dt><strong>path_list</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary of nodes that comprises the path of every node in G to
base_id node.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility.voxels">
<span id="tlseparation-utility-voxels-module"></span><h2>tlseparation.utility.voxels module<a class="headerlink" href="#module-tlseparation.utility.voxels" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tlseparation.utility.voxels.voxelize_cloud">
<code class="descclassname">tlseparation.utility.voxels.</code><code class="descname">voxelize_cloud</code><span class="sig-paren">(</span><em>arr</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tlseparation/utility/voxels.html#voxelize_cloud"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tlseparation.utility.voxels.voxelize_cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a dictionary of voxels containing their central coordinates
and indices of points belonging to each voxel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr: array</strong></dt>
<dd><p class="first last">Array of points/entries to voxelize.</p>
</dd>
<dt><strong>voxel_size: float</strong></dt>
<dd><p class="first last">Length of all voxels sides/edges.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>vox: defaultdict</strong></dt>
<dd><p class="first last">Dictionary containing voxels. Keys are voxels’ central coordinates and
values are indices of points in arr inside each voxel.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tlseparation.utility">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-tlseparation.utility" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="CHANGELOG" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tlseparation.scripts.html" class="btn btn-neutral float-left" title="tlseparation.scripts package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2019, Matheus Boni Vicari

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>